{% extends 'layout.html'%} <!--Template For Logged In Users-->

{% block title %}Home{% endblock %}

<!-- Also '%' allows for operations and inheritence in Jinja Code-->
{% block content %}
<h2>Home Page</h2>
<p>Welcome back, {{ username }}!</p>

<form action="{{ url_for('insert') }}" method="post">
    <fieldset>
        <div class="form-group">
            <label for="item">Title:</label>
            <input id="item" type="text" placeholder="Smartphone" name="item" required>
        </div>

        <div class="form-group">
            <label for="description">Description:</label>
            <input id="description" type="text" name="description" required>
        </div>

        <div class="form-group">
            <label for="category">Category:</label>
            <input id="category" type="text" name="category" required>
        </div>

        <div class="form-group">
            <label for="price">Price:</label>
            <input id="price" type="text" name="price" required>
        </div>
    </fieldset>
    <input type="submit" value="Submit">
</form>

<div id="msg" style="display: none;">
    <p>{{ msg }}</p>
</div>

<form action="{{ url_for('search')}}" method="post">
    <fieldset>
        <div class="form-group">
            <label for="search">Category:  <input id="search" type="text" name="search" required></label>
        </div>
    </fieldset>
    <input type="submit" value="Search"/>
</form>

<div class="container1">
<table bgcolor="black" width="700" class="centered-table1">
    <tr bgcolor="grey">
        <th width="100">Item ID</th>
        <th width="100">Title</th>
        <th width="100">Description</th>
        <th width="100">Category</th>
        <th width="100">Price</th>
    </tr>
    {% for item in items %}
    <tr bgcolor="#d3d3d3" align="center" class="table-row">
        <td>{{ item.item_id }} </td>
        <td>{{ item.title }}</td>
        <td>{{ item.description }}</td>
        <td>{{ item.category }}</td>
        <td>${{ item.price }}</td>
    </tr>
    {% endfor %}
</table>
</div>

<!-- Hidden dropdown -->
<form action="{{ url_for('review') }}" method="post">
<div class="rating-dropdown">
    <input type="number" id="specific-id" placeholder="^ Enter a specific ID (numbers only) ^" name="specific-id"/>
    <select id="rating" name="rating">
        <option value="excellent">excellent</option>
        <option value="good">good</option>
        <option value="fair">fair</option>
        <option value="poor">poor</option>
    </select>
    <textarea id="descript" placeholder="Enter a description" name="descript"></textarea>
    <button id="save-button">Submit Rating</button>
</div>
</form>

<br><br><br><br><br><br><br><br><br>

<!-- JavaScipt code to control the pop-up -->
<script>
    /*Function to display a successful submission pop-up
    function showPopup(message){
        const popup = document.getElementById('msg');
        popup.style.display = 'block';
        popup.innerHTML = message;
    }

    $(document).ready(function(){
        $(document.body).on("click", "tr[data-category-id]", function() {
            //Get the category ID associated with the clicked row
            var categoryId = $(this).data("category-id");

            //Show the hidden dropdown and textarea for the selected category
            $(".rating-dropdown").hide();
            $(".rating-dropdown[data-category-id= '" + categoryId + "']").show();
        });
       });
 */

</script>


{% endblock %}